<div
	class="navbar__wrapper"
	[@loginSwipe]="loginNavbarSwipeAnimationState"
	(@loginSwipe.done)="onLoginNavbarSwipeAnimationDone($event)"
	[@loggedSwipe]="wasLoginNavbarDispatched ? loggedNavbarSwipeAnimationState : 'invalid'"
	(@loggedSwipe.done)="onLoggedNavbarSwipeAnimationDone($event)"
>
	<div class="navbar__login" *ngIf="!wasLoginNavbarDispatched">
		<app-avatar
			[base64Image]="operator?.photo"
			[@breathe]="loginAvatarBreatheAnimationState"
			(@breathe.done)="onLoginAvatarBreatheAnimationDone()"
			[@bezierShrink]="loginAvatarShrinkAnimationState"
		></app-avatar>
		<form [formGroup]="loginForm">
			<mat-form-field
				appearance="outline"
				[@bezierHeightShrink]="loginInputShrinkAnimationState"
				[attr.data-is-disabled]="loginForm.disabled"
			>
				<mat-label>Username</mat-label>
				<input
					matInput
					formControlName="userName"
					[minlength]="NAVBAR_INPUT_USER_NAME_MIN_LENGTH"
					[maxLength]="NAVBAR_INPUT_USER_NAME_MAX_LENGTH"
					(focus)="onFocus()"
					required
				>
			</mat-form-field>
			<button
				type="button"
				(click)="onLogin()"
				[@bezierHeightShrink]="loginInputShrinkAnimationState"
				[disabled]="loginForm.disabled || loginForm.get('userName')?.invalid"
			>
				Login
			</button>
			<div
				class="navbar__login__error"
				[@bezierHeightShrink]="loginInputErrorShrinkAnimationState"
			>
				{{errorMessage}}
			</div>
		</form>
		<app-logo [@bezierShrink]="loginInputShrinkAnimationState"></app-logo>
	</div>
	<div class="navbar__logged" *ngIf="wasLoginNavbarDispatched && operator">
		<div class="navbar__content">
			<app-logo></app-logo>
			<div class="navbar__logged__profile">
				<button class="navbar__logged__profile-button" (click)="onProfileClick()">
					<app-avatar [base64Image]="operator.photo"></app-avatar>
					<span>{{operator.displayName}}</span>
					<svg
						viewBox="0 0 21 12"
						fill="none"
						xmlns="http://www.w3.org/2000/svg"
						[@rotateCounterClock180]="loggedNavbarProfileShrinkAnimationState === 'max' ? 'end' : 'start'"
					>
						<path
							d="M2.00607 1.14285L9.21465 8.99864C9.99606 9.85021 11.3345 9.86412 12.1334 9.02899L19.6778 1.14285"
							stroke-width="3"
						/>
					</svg>
				</button>
				<ul
					class="navbar__logged__profile-settings"
					[@verticalShrink]="loggedNavbarProfileShrinkAnimationState"
				>
					<li>
						<button>
							<svg
								viewBox="0 0 24 24"
								fill="none"
								xmlns="http://www.w3.org/2000/svg"
							>
								<path d="M20.58 19.37L17.59 11.01C17.38 10.46 16.91 10.12 16.37 10.12C15.83 10.12 15.37 10.46 15.14 11.03L12.16 19.37C12.02 19.76 12.22 20.19 12.61 20.33C13 20.47 13.43 20.27 13.57 19.88L14.19 18.15H18.54L19.16 19.88C19.27 20.19 19.56 20.38 19.87 20.38C19.95 20.38 20.04 20.37 20.12 20.34C20.51 20.2 20.71 19.77 20.57 19.38L20.58 19.37ZM14.74 16.64L16.38 12.05L18.02 16.64H14.74ZM12.19 7.85C9.92999 11.42 7.89 13.58 5.41 15.02C5.29 15.09 5.16 15.12 5.04 15.12C4.78 15.12 4.53 14.99 4.39 14.75C4.18 14.39 4.3 13.93 4.66 13.73C6.75999 12.51 8.48 10.76 10.41 7.86H4.12C3.71 7.86 3.37 7.52 3.37 7.11C3.37 6.7 3.71 6.36 4.12 6.36H7.87V4.38C7.87 3.97 8.21 3.63 8.62 3.63C9.02999 3.63 9.37 3.97 9.37 4.38V6.36H13.12C13.53 6.36 13.87 6.7 13.87 7.11C13.87 7.52 13.53 7.86 13.12 7.86H12.18L12.19 7.85ZM12.23 15.12C12.1 15.12 11.97 15.09 11.85 15.02C11.2 14.64 10.57 14.22 9.97999 13.78C9.64999 13.53 9.58 13.06 9.83 12.73C10.08 12.4 10.55 12.33 10.88 12.58C11.42 12.99 12.01 13.37 12.61 13.72C12.97 13.93 13.09 14.39 12.88 14.75C12.74 14.99 12.49 15.12 12.23 15.12Z"/>
							</svg>
							<span>{{ currentLang['MENU_TRANSLATE_TITLE'] }}</span>
						</button>
					</li>
				</ul>
			</div>
			<app-menu [data]="menu"></app-menu>
		</div>
	</div>
</div>
<button
	class="navbar__hamburguer"
	(click)="onHamburgerClick()"
	[disabled]="!wasLoginNavbarDispatched && !operator"
>
	<svg
		viewBox="0 0 24 24"
		xmlns="http://www.w3.org/2000/svg"
	>
		<path d="M2,4A1,1,0,0,1,3,3H21a1,1,0,0,1,0,2H3A1,1,0,0,1,2,4Zm1,9H21a1,1,0,0,0,0-2H3a1,1,0,0,0,0,2Zm0,8H21a1,1,0,0,0,0-2H3a1,1,0,0,0,0,2Z"/>
	</svg>
</button>